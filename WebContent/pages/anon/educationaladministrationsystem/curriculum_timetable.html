<!DOCTYPE html>
<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="chrome=1,IE=Edge">
		<link rel="shortcut icon" href="http://124.228.83.236/r3/imgs/sign/bitbug_favicon.ico" />
		<link rel="stylesheet" href="/r3/layui-v2.3.0/layui/css/layui.css" />
		<title>课程课表</title>
		<style>
			.inputleng {
				width: 300px;
			}
		</style>
	</head>

	<body style="padding: 10px;">
		<h1 style="text-align: center;">课程课表</h1>
		<hr class="layui-bg-green">
		<form class="layui-form" action="">

			<div class="layui-form-item inputleng">
				<label class="layui-form-label">老师</label>
				<div class="layui-input-block">
					<select name="semester" lay-verify="required" id="semester" lay-filter="required1">
						<!--<option value=""></option>-->
						<!--<option value="0">北京</option>
						<option value="1">上海</option>
						<option value="2">广州</option>
						<option value="3">深圳</option>
						<option value="4">杭州</option>-->
					</select>
				</div>
			</div>
			<div class="layui-form-item inputleng">
				<label class="layui-form-label">课程</label>
				<div class="layui-input-block">
					<select name="curriculum" lay-verify="required" id="curriculum" lay-filter="required2">

					</select>
				</div>
			</div>

			<div class="layui-form-item">
				<div class="layui-input-block">
					<button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
					<!--<button type="reset" class="layui-btn layui-btn-primary">重置</button>-->
				</div>
			</div>
		</form>
		<p style="margin-left: 10px;">承担单位：<span style="margin-left: 5px; margin-right: 5px;" id="kcCJDW"></span>课程：<span style="margin-left: 5px; margin-right: 5px;" id="kcName"></span>课时：<span style="margin-left: 5px; margin-right: 5px;" id="kcCout"></span>学分：<span style="margin-left: 5px; margin-right: 5px;" id="kcCredits"></span></p>
		<table class="layui-table" id="ksbTable" style="display: none;">
			<colgroup>
				<col width="100">
				<col width="300">
				<col width="300">
				<col width="300">
				<col width="300">
				<col width="300">
				<col width="300">
				<col width="300">
				<col width="300">
			</colgroup>
			<thead>
				<tr>
					<th colspan="9" data-bind="userId"></th>
				</tr>
				<tr>
					<th>时段</th>
					<th>课时</th>
					<th>星期一</th>
					<th>星期二</th>
					<th>星期三</th>
					<th>星期四</th>
					<th>星期五</th>
					<th>星期六</th>
					<th>星期天</th>
				</tr>
			</thead>
			<tbody data-bind='shijian'>
				<tr>
					<td data-bind="shiduan">上午</td>
					<td data-bind="sxXuHao">第一节</td>
					<td data-bind="星期一"></td>
					<td data-bind="星期二"></td>
					<td data-bind="星期三"></td>
					<td data-bind="星期四"></td>
					<td data-bind="星期五"></td>
					<td data-bind="星期六"></td>
					<td data-bind="星期日"></td>
				</tr>
			</tbody>
		</table>
		<span id="show">
			
		</span>
	</body>
	<script src="/r3/jquery/jquery-1.8.2.js" type="text/javascript"></script>
	<script src="/r3/layui-v2.3.0/layui/layui.js"></script>
	<script src="/r3/anonJs/reJS.js"></script>
	<script src="/r3/anonJs/transparency.min.js"></script>
	<script>
		
		function selectUser(userId){
			
		}
		
		
		
		//
		function selectYWKC(xueqi, userId) {
			var xinqi = {
				"星期一": "",
				"星期二": "",
				"星期三": "",
				"星期四": "",
				"星期五": "",
				"星期六": "",
				"星期日": ""
			};
			var qihe2 = {};
			var rendeId = "ksbTable_" + userId;
			$('#show').append('<table class="layui-table" id="' + rendeId + '">' + $('#ksbTable').html() + "</table>");

			var parm = {
				"pb_UrlId": 204,
				"xueQi": xueqi
			}
			if(userId) {
				parm['a1.userId'] = userId;
			}
			request.send("xt/man.do?m=get&data=list", parm, function(d1) {
				qihe2['userId'] =d1.data[0].userName;
				$(d1.data).each(function(i, v) {
					var tu = jQuery.extend(true, {}, xinqi);
					var zheXuhao = -1;
					if(qihe2.hasOwnProperty('shijian')) {
						$(qihe2['shijian']).each(function(i1, v1) {
							if(v1 && v.sxXuHao == v1.sxXuHao) {
								tu = v1;
								zheXuhao = i1;
								return false;
							}

						});

					} else {
						qihe2['shijian'] = [];
					}
					tu[v.sxZhou] = "班级编号" + v.bjId + ",课程编号" + v.ksId;
					if(zheXuhao == -1) {
						tu['sxXuHao'] = v.sxXuHao;
						var shijian = '晚上'
						var xuhao = 4;
						switch(v.sxXuHao) {
							case '第一节':
								xuhao = 0;
								shijian = '上午';
								break;
							case '第二节':
								xuhao = 1;
								shijian = '上午';
								break;
							case '第三节':
								xuhao = 2;
								shijian = '下午';
								break;
							case '第四节':
								xuhao = 3;
								shijian = '下午';
								break;
						}
						tu['shiduan'] = shijian;
						qihe2['shijian'][xuhao] = tu;
					} else {
						qihe2['shijian'][zheXuhao] = tu;
					}
				});
				$('#' + rendeId).render(qihe2, {
					shijian: {
						shiduan: {
							rowspan: function() {
								if(this.sxXuHao == "第一节" || this.sxXuHao == "第三节") {
									return 2;
								}
							},
							style: function() {
								if(this.sxXuHao == "第二节" || this.sxXuHao == "第四节") {
									return "display:none;";
								}
							}
						}
					}
				});
			});
		}

		//Demo
		layui.use('form', function() {
			var form = layui.form;

			//监听提交
			form.on('submit(formDemo)', function(data) {
				//layer.msg(JSON.stringify(data.field));

				return false;
			});

			var xkMap = {};
			$(function() {
				//var laoshi=[1,7];
				//查询教务
				//$(laoshi).each(function(i,v){
				selectYWKC(1, 7);
				//});

			});
		});
	</script>

</html>